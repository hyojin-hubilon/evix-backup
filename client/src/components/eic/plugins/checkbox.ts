import { Plugin, Schema } from '@pdfme/common';
import { image } from '@pdfme/schemas';

export interface Checkbox extends Schema {}

export const checkbox: Plugin<Checkbox> = {
    ui: async (arg) => {
        const { onChange, rootElement } = arg;

        const div = document.createElement('div');
        document.body.appendChild(div);

        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';
        checkbox.style.zoom = '2';

        const data =
            'data:image/png;base64,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';

        //체크 되어있으면 체크박스 그림으로, 안되어있으면 ""으로 값을 넘겨준다.
        checkbox.addEventListener('change', (event) => {
            const isChecked = (event.target as HTMLInputElement).checked;
            onChange && onChange({ key: 'content', value: isChecked ? data : '' });
        });

        div.appendChild(checkbox);
        rootElement.appendChild(div);
    },
    pdf: image.pdf,
    propPanel: {
        schema: {},
        defaultSchema: {
            type: 'checkbox',
            icon: '<svg viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools --> <title>ic_fluent_checkbox_checked_24_regular</title> <desc>Created with Sketch.</desc> <g id="🔍-Product-Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="ic_fluent_checkbox_checked_24_regular" fill="#212121" fill-rule="nonzero"> <path d="M18.25,3 C19.7687831,3 21,4.23121694 21,5.75 L21,18.25 C21,19.7687831 19.7687831,21 18.25,21 L5.75,21 C4.23121694,21 3,19.7687831 3,18.25 L3,5.75 C3,4.23121694 4.23121694,3 5.75,3 L18.25,3 Z M18.25,4.5 L5.75,4.5 C5.05964406,4.5 4.5,5.05964406 4.5,5.75 L4.5,18.25 C4.5,18.9403559 5.05964406,19.5 5.75,19.5 L18.25,19.5 C18.9403559,19.5 19.5,18.9403559 19.5,18.25 L19.5,5.75 C19.5,5.05964406 18.9403559,4.5 18.25,4.5 Z M10,14.4393398 L16.4696699,7.96966991 C16.7625631,7.6767767 17.2374369,7.6767767 17.5303301,7.96966991 C17.7965966,8.23593648 17.8208027,8.65260016 17.6029482,8.94621165 L17.5303301,9.03033009 L10.5303301,16.0303301 C10.2640635,16.2965966 9.84739984,16.3208027 9.55378835,16.1029482 L9.46966991,16.0303301 L6.46966991,13.0303301 C6.1767767,12.7374369 6.1767767,12.2625631 6.46966991,11.9696699 C6.73593648,11.7034034 7.15260016,11.6791973 7.44621165,11.8970518 L7.53033009,11.9696699 L10,14.4393398 L16.4696699,7.96966991 L10,14.4393398 Z" id="🎨Color"> </path> </g> </g> </g></svg>',
            position: { x: 0, y: 0 },
            width: 11.5,
            height: 10,
        },
    },
};
